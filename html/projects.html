<!DOCTYPE html>
<html lang="ru">
  <head>
    @@include('partials/head.html')
    <link rel="stylesheet" href="../css/menu.css" />
    <link rel="stylesheet" href="../css/projects.css" />
    <link rel="stylesheet" href="../css/fonts.css" />
  </head>
  <body>
    @@include('partials/menu.html')
    <main>
      <div class="image">
        <img src="../images/projects.png" alt="Example Image" />
      </div>
      <div class="text">
        <p>проекты</p>
      </div>
    </main>
    <section class="second">
      <div class="text">
        <p class="left"></p>
        <div class="right">
          <p class="up">
            НЕ ПЫТАЕМСЯ ГНАТЬСЯ ЗА ТРЕНДАМИ, КРЕАТИВИМ И СОЗДАЁМ СВОИ. ПОМИМО ПЕРЕЧИСЛЕННЫХ ПОДВИГОВ ЗА ПЛЕЧАМИ НАШИХ ГЕРОЕВ ГРАНТ МИНКУЛЬТА, ЛАУРЕАТСТВА НА ПИТЧИНГАХ И ФЕСТИВАЛЯХ, РАЗРАБОТКА И ИСПОЛНЕНИЕ БРЕНДМЕНЕДЖМЕНТА В АУДИОВИЗУАЛЬНЫХ ФОРМАТАХ И, КОНЕЧНО, РЕЙТИНГОВЫЕ ВИДЕО В СЕТИ.
          </p>
          <p class="down">
            В НАШЕЙ КОМАНДЕ ЕСТЬ И ХУДОЖНИКИ, КОТОРЫЕ СОЗДАЮТ ГРАФИЧЕСКОЕ ОБРАМЛЕНИЕ ДЛЯ ВИДЕО, А ТАКЖЕ РИСУЮТ ЛОГОТИПЫ И ДЕЛАЮТ КРЕАТИВНЫЕ LOOK-BOOKS.
          </p>
        </div>
      </div>
    </section>
    <section class="projects-menu">
    <div class="filters">
        <button onclick="filterProjects('all')">ВСЕ</button>
        <button onclick="filterProjects('smm')">SMM</button>
        <button onclick="filterProjects('web')">WEB</button>
        <button onclick="filterProjects('pr')">PR</button>
        <button onclick="filterProjects('prod')">PRODUCTION</button>
    </div>
    <div class="projects" id="projectsContainer">
        <a href="one_project.html?section=project_1" class="project" data-category="smm">
            <img src="" alt="Проект smm">
            <div class="info">
                <span class="year">2023</span>
                <span class="category">SMM</span>
                <span class="title">Название проекта</span>
            </div>
            <div class="vertical"></div>
            <div class="horizontal"></div>
        </a>
        <a href="one_project.html?section=project_2" class="project" data-category="web">
            <img src="" alt="Проект web">
            <div class="info">
                <span class="year">2022</span>
                <span class="category">WEB</span>
                <span class="title">Название проекта</span>
            </div>
            <div class="vertical"></div>
            <div class="horizontal"></div>
        </a>
        <a href="one_project.html?section=project_3" class="project" data-category="pr">
            <img src="" alt="Проект pr">
            <div class="info">
                <span class="year">2021</span>
                <span class="category">PR</span>
                <span class="title">Название проекта</span>
            </div>
            <div class="vertical"></div>
            <div class="horizontal"></div>
        </a>
        <a href="one_project.html?section=project_1" class="project" data-category="prod">
            <img src="" alt="Проект production">
            <div class="info">
                <span class="year">2020</span>
                <span class="category">PROD</span>
                <span class="title">Название проекта</span>
            </div>
            <div class="vertical"></div>
            <div class="horizontal"></div>
        </a>
        <a href="one_project.html?section=project_1" class="project" data-category="prod">
            <img src="" alt="Проект production">
            <div class="info">
                <span class="year">2020</span>
                <span class="category">PROD</span>
                <span class="title">Название проекта</span>
            </div>
            <div class="vertical"></div>
            <div class="horizontal"></div>
        </a>
        <a href="one_project.html?section=project_1" class="project" data-category="prod">
            <img src="" alt="Проект production">
            <div class="info">
                <span class="year">2020</span>
                <span class="category">PROD</span>
                <span class="title">Название проекта</span>
            </div>
            <div class="vertical"></div>
            <div class="horizontal"></div>
        </a>
        <a href="one_project.html?section=project_1" class="project" data-category="prod">
            <img src="" alt="Проект production">
            <div class="info">
                <span class="year">2020</span>
                <span class="category">PROD</span>
                <span class="title">Название проекта</span>
            </div>
            <div class="vertical"></div>
            <div class="horizontal"></div>
        </a>
        <a href="one_project.html?section=project_1" class="project" data-category="prod">
            <img src="" alt="Проект production">
            <div class="info">
                <span class="year">2020</span>
                <span class="category">PROD</span>
                <span class="title">Название проекта</span>
            </div>
            <div class="vertical"></div>
            <div class="horizontal"></div>
        </a>
        <a href="one_project.html?section=project_1" class="project" data-category="web">
            <img src="" alt="Проект production">
            <div class="info">
                <span class="year">2020</span>
                <span class="category">WEB</span>
                <span class="title">Название проекта</span>
            </div>
            <div class="vertical"></div>
            <div class="horizontal"></div>
        </a>
        <a href="one_project.html?section=project_1" class="project" data-category="web">
            <img src="" alt="Проект production">
            <div class="info">
                <span class="year">2020</span>
                <span class="category">WEB</span>
                <span class="title">Название проекта</span>
            </div>
            <div class="vertical"></div>
            <div class="horizontal"></div>
        </a>
        <a href="one_project.html?section=project_1" class="project" data-category="smm">
            <img src="" alt="Проект production">
            <div class="info">
                <span class="year">2020</span>
                <span class="category">SMM</span>
                <span class="title">Название проекта</span>
            </div>
            <div class="vertical"></div>
            <div class="horizontal"></div>
        </a>
        <a href="one_project.html?section=project_1" class="project" data-category="pr">
            <img src="" alt="Проект production">
            <div class="info">
                <span class="year">2020</span>
                <span class="category">PR</span>
                <span class="title">Название проекта</span>
            </div>
            <div class="vertical"></div>
            <div class="horizontal"></div>
        </a>
    </div>
    <button class= "loadMore" id="loadMoreButton" onclick="loadMoreProjects()">
        <div style="display: flex; flex-direction: column; align-items: center;">
            <div class="plus">
                <div style="position: absolute; top: 50%; left: 0; right: 0; height: 2px; background-color: rgba(255, 255, 255, 0.3); transform: translateY(-50%);"></div>
                <div style="position: absolute; left: 50%; top: 0; bottom: 0; width: 2px; background-color: rgba(255, 255, 255, 0.3); transform: translateX(-50%);"></div>
            </div>
            <span>Больше проектов</span>
        </div>
    </button>
    </section>

    <script>
        let visibleProjects = window.innerWidth <= 1440 ? 6 : 9; // Количество видимых проектов за раз, меняется в зависимости от ширины экрана

        function initializeProjects() {
            const projects = document.querySelectorAll('.project');
            let visibleCount = 0;

            projects.forEach(project => {
                if (project.classList.contains('filtered-out')) {
                    project.classList.add('hidden');
                } else if (visibleCount < visibleProjects) {
                    project.classList.remove('hidden');
                    visibleCount++;
                } else {
                    project.classList.add('hidden');
                }
            });
            updateLoadMoreButton();
        }

        function loadMoreProjects() {
            const projects = document.querySelectorAll('.project:not(.filtered-out)');
            let currentlyVisible = document.querySelectorAll('.project:not(.filtered-out):not(.hidden)').length;

            let count = 0;
            const increment = window.innerWidth <= 1440 ? 6 : 9;

            projects.forEach(project => {
                if (count < increment && currentlyVisible < visibleProjects + increment) {
                    if (project.classList.contains('hidden')) {
                        project.classList.remove('hidden');
                        count++;
                    }
                    currentlyVisible++;
                }
            });

            visibleProjects += increment;
            updateLoadMoreButton();
        }

        function filterProjects(category) {
            if (category) {

            const projects = document.querySelectorAll('.project');

            projects.forEach(project => {
                if (category === 'all' || project.dataset.category === category) {
                    project.classList.remove('filtered-out');
                } else {
                    project.classList.add('filtered-out');
                    project.classList.add('hidden'); // Скрываем проекты, которые не соответствуют фильтру
                }
            });

            visibleProjects = window.innerWidth <= 1440 ? 6 : 9; // Сбрасываем лимит видимых проектов при смене фильтра
            initializeProjects();
            }
        }

        function updateLoadMoreButton() {
            const projects = document.querySelectorAll('.project:not(.filtered-out)');
            const visible = document.querySelectorAll('.project:not(.filtered-out):not(.hidden)').length;
            const loadMoreButton = document.getElementById('loadMoreButton');

            if (visible >= projects.length) {
                loadMoreButton.classList.add('hidden');
            } else {
                loadMoreButton.classList.remove('hidden');
            }
        }

        document.querySelectorAll('.filters button').forEach(button => {
            button.addEventListener('click', (event) => {
                document.querySelectorAll('.filters button').forEach(btn => btn.classList.remove('active'));
                event.target.classList.add('active');
                filterProjects(event.target.getAttribute('data-category'));
            });
        });

        document.addEventListener('DOMContentLoaded', () => {
            initializeProjects();
            document.getElementById('loadMoreButton').addEventListener('click', loadMoreProjects);
        });

        window.addEventListener('resize', () => {
            visibleProjects = window.innerWidth < 1440 ? 6 : 9;
            initializeProjects();
        });
    </script>

  </body>
  @@include('partials/footer.html')
</html>
